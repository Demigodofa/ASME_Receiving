<!-- /ASME_Receiving/index.html  -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ASME Receiving — Phase 1</title>
  <meta name="theme-color" content="#101828" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
  <style>
    html,body{height:100%;margin:0}
    body{display:grid;place-items:center;background:#0b1120;color:#e5e7eb;
         font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;padding:24px}
    .card{width:min(520px,100%);background:#111827;border:1px solid #1f2937;
          border-radius:20px;padding:28px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .row{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
    .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:600;
         background:#1f2937;color:#e5e7eb;cursor:pointer}
    .btn.primary{background:#22c55e;color:#052e16}
    .badge{font-size:12px;margin-top:8px;color:#94a3b8}
  </style>
</head>
<body>
  <main class="card" role="main" aria-label="App landing">
    <h1>ASME Receiving</h1>
    <p>Minimal, installable, offline landing.</p>
    <div class="row">
      <button id="installBtn" class="btn primary" hidden>Install</button>
      <button id="checkBtn" class="btn">Check Offline</button>
    </div>
    <div id="status" class="badge"></div>
  </main>

  <script>
    // Register SW — filename must match your repo (underscore)
    (async () => {
      if (!('serviceWorker' in navigator)) return;
      try {
        const reg = await navigator.serviceWorker.register('service_worker.js');
        if (reg.waiting) reg.waiting.postMessage({ type: 'SKIP_WAITING' });
        document.getElementById('status').textContent = 'Offline ready.';
      } catch (e) {
        document.getElementById('status').textContent = 'Failed to register service worker.';
        console.error(e);
      }
    })();

    // Install prompt (Android)
    let deferredPrompt=null;
    window.addEventListener('beforeinstallprompt', e => {
      e.preventDefault(); deferredPrompt=e;
      document.getElementById('installBtn').hidden=false;
    });
    document.getElementById('installBtn').onclick = async () => {
      document.getElementById('installBtn').hidden=true;
      if (!deferredPrompt) return;
      deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt=null;
    };

    // Offline check
    document.getElementById('checkBtn').onclick = async () => {
      const res = await caches.match(new Request('index.html', { cache: 'reload' }));
      document.getElementById('status').textContent = res ? '✅ Cached. Offline OK.' : '⚠️ Not cached yet.';
    };
  </script>
</body>
</html>

<!-- /ASME_Receiving/manifest.webmanifest -->
{
  "name": "ASME Receiving",
  "short_name": "ASME",
  "start_url": "./index.html",
  "scope": "./",
  "display": "standalone",
  "background_color": "#0b1120",
  "theme_color": "#101828",
  "icons": [
    { "src": "assets/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "assets/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}
